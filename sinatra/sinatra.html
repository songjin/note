<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" type="text/css" href=./../style.css>
</head>

<body>
	<h2>Hello world</h2>

<p>安装sinatra:</p>

<pre><code>gem install sinatra
</code></pre>

<p>写hello world很简单</p>

<pre><code>&#39;sinatra&#39;

get &#39;/hi&#39; do
 &quot;Hello World!&quot;
end
</code></pre>

<p>保存为hello.rb,执行</p>

<pre><code>ruby hello.rb
</code></pre>

<p>你会在终端中看到类似下面的信息：</p>

<pre><code>[2012-10-06 00:21:35] INFO  WEBrick 1.3.1
[2012-10-06 00:21:35] INFO  ruby 1.9.3 (2012-02-16) [x86_64-darwin12.0.0]
== Sinatra/1.3.3 has taken the stage on 4567 for development with backup from WEBrick
[2012-10-06 00:21:35] INFO  WEBrick::HTTPServer#start: pid=973 port=4567
</code></pre>

<p>Sinatra默认使用WEBrick服务器，开启一个4567端口。现在，打开浏览器，打开0:0:0:0:4567,你就能看到Hello World了。</p>

<h2>什么是Sinatra</h2>

<p>Sinatra是Ruby写成的一个DSL（domain-specific language 领域专门语言），就是一门专门用来写网站的语言。其实就是Ruby加了一点语法而已。</p>

<p>它能帮你搞定HTTP请求什么的，你写几行代码就可以构建Web应用了。</p>

<h2>什么是HTTP</h2>

<p>HTTP是超文本传输协议（HTTP，HyperText Transfer Protocol，最初是设计用来传输HTML用的。</p>

<p>说白了，就是客户端和服务器之间怎么交流的方式，一种约定。</p>

<ul>
<li><a href="http://www.infoq.com/cn/articles/sinatra-intro">http://www.infoq.com/cn/articles/sinatra-intro</a></li>
</ul>

<p>Ruby主流的ORM库有Sequel，DataMapper和来自Rails的ActiveRecord</p>

<p>DataMapper
Sequel</p>

<p><a href="http://bytesofpi.com/post/23663592388/up-and-running-with-sinatra-and-activerecord">http://bytesofpi.com/post/23663592388/up-and-running-with-sinatra-and-activerecord</a></p>

<p><a href="http://www.brandon-harris.com/sinatra/2010/03/28/simple-sinatra-activerecord-app-with-migrations.html">http://www.brandon-harris.com/sinatra/2010/03/28/simple-sinatra-activerecord-app-with-migrations.html</a></p>

<p><a href="http://ruby.about.com/od/sinatra/a/datamapper.htm">http://ruby.about.com/od/sinatra/a/datamapper.htm</a></p>

<p><a href="http://ruby-china.org/topics/6501">datamapper入门</a></p>

<pre><code>require &#39;dm-core&#39;
require &#39;dm-migrations&#39;

# Open the database test1.db
DataMapper.setup :default, &quot;sqlite3://#{Dir.pwd}/test1.db&quot; 

# Define the Person model
class Person
  include DataMapper::Resource

  property :firstname, String
  property :lastname, String
  property :email, String, :key =&gt; true
end

# Automatically create the tables if they don&#39;t exist
DataMapper.auto_migrate!

# Create a new record
p = Person.new
p.attributes = {
  :firstname =&gt; &#39;John&#39;,
  :lastname =&gt; &#39;Doe&#39;,
  :email =&gt; &#39;john.doe@email.com&#39;
}

# Save it to the database
p.save

# Make some changes to the object
p.lastname = &#39;Smith&#39;
p.save

# Create a new object and destroy it
p2 = Person.new
p2.email = &#39;testing@testing.com&#39;
p2.save

p2.destroy

# Find a record from the database
p3 = Person.get(&#39;john.doe@email.com&#39;)
puts p3.inspect # =&gt; #&lt;Person @firstname=&quot;John&quot; @lastname=&quot;Smith&quot; @email=&quot;john.doe@email.com&quot;&gt;
</code></pre>

<h1>　模板语言</h1>

<p><a href="http://haml.info">HAML</a>
<a href="http://slim-lang.com">Slim</a></p>

</body>
</html>

